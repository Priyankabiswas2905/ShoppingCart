(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],[,,,,,,,,,,,function(t,e,a){t.exports=a(26)},,,,,function(t,e,a){},function(t,e,a){},function(t,e,a){},function(t,e,a){},function(t,e,a){},,function(t,e,a){},function(t,e,a){},function(t,e,a){},function(t,e,a){},function(t,e,a){"use strict";a.r(e);var n=a(0),r=a.n(n),c=a(4),s=a.n(c),o=(a(16),a(7)),l=a(8),i=a(10),u=a(9),m=(a(17),a(1)),p=(a(18),function(t){return r.a.createElement("div",{className:"image"},r.a.createElement("img",{src:t.product_image,alt:t.product_name}))}),d=(a(19),function(t){return r.a.createElement("div",{className:"description"},r.a.createElement("span",{className:"brand-name"},t.brand_name),r.a.createElement("span",null,t.product_name),r.a.createElement("span",null,t.quantity," Qty Only available"))}),f=(a(20),function(t){return r.a.createElement("div",{className:"total-price"},r.a.createElement("span",{className:"old-value"},r.a.createElement("del",null,r.a.createElement("span",{className:"amount"},"Rs. ".concat(t.price)," "))),r.a.createElement("span",{className:"new-value"},r.a.createElement("ins",null,r.a.createElement("span",{className:"amount"},"Rs. ".concat(t.mrp)))))}),b=a(2),E=a.n(b),_=a(3),v=a(5),g=(a(22),function(t){console.log("props: ",t);var e=Object(n.useRef)(1),a=Object(n.useState)({is_exists:!1,cart_value:1}),c=Object(m.a)(a,2),s=c[0],o=c[1];Object(n.useEffect)((function(){var e=localStorage.getItem("cart_item");e&&(e=JSON.parse(e)).forEach((function(e,a){if(parseInt(e.product_id)===parseInt(t.product_id))return o({cart_value:e.cart_qty,is_exists:!0}),!1}))}),[t.product_id]);var l=function(){var a=Object(v.a)(E.a.mark((function a(n){var r,c,l,i;return E.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(r=localStorage.getItem("cart_item"),"add"!==n){a.next=8;break}if(!((l=parseInt(e.current.value))+1>t.quantity)){a.next=5;break}return a.abrupt("return",!1);case 5:c=l+1,a.next=16;break;case 8:if((i=parseInt(e.current.value))-1!==0){a.next=15;break}if(!r){a.next=14;break}return r=JSON.parse(r),a.next=14,r.forEach((function(e,a){parseInt(e.product_id)===parseInt(t.product_id)&&(r.splice(a,1),localStorage.setItem("cart_item",JSON.stringify(r)),o(Object(_.a)({},s,{is_exists:!1})),t.isCartUpdate())}));case 14:return a.abrupt("return",!1);case 15:c=i-1;case 16:r&&(r=JSON.parse(r)).forEach((function(e,a){if(parseInt(e.product_id)===parseInt(t.product_id))return r[a].cart_qty=c,localStorage.setItem("cart_item",JSON.stringify(r)),t.isCartUpdate(),o(Object(_.a)({},s,{cart_value:c})),!1}));case 17:case"end":return a.stop()}}),a)})));return function(t){return a.apply(this,arguments)}}(),i=function(){var e=Object(v.a)(E.a.mark((function e(){var a,n,r;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a={product_id:t.product_id,quantity:t.quantity,price:t.price,mrp:t.mrp,cart_qty:1},!(n=localStorage.getItem("cart_item"))){e.next=9;break}return n=JSON.parse(n),r=!1,e.next=7,n.forEach((function(e,a){if(parseInt(e.product_id)===parseInt(t.product_id))return r=!0,!1}));case 7:return r||(n.push(a),localStorage.setItem("cart_item",JSON.stringify(n)),t.isCartUpdate(),o(Object(_.a)({},s,{is_exists:!0}))),e.abrupt("return",!1);case 9:(n=[]).push(a),localStorage.setItem("cart_item",JSON.stringify(n)),t.isCartUpdate(),o(Object(_.a)({},s,{is_exists:!0}));case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"quantity"},s.is_exists?r.a.createElement("div",null,r.a.createElement("button",{className:"plus-btn",type:"button",name:"button",onClick:function(){return l("add")}},r.a.createElement("img",{src:"/static/plus.svg",alt:""})),r.a.createElement("input",{type:"text",name:"name",value:s.cart_value,ref:e,readOnly:!0}),r.a.createElement("button",{className:"minus-btn",type:"button",onClick:function(){return l("minus")},name:"button"},r.a.createElement("img",{src:"/static/minus.svg",alt:""}))):r.a.createElement("button",{className:"add-to-cart",onClick:i},"Add to Cart"))}),h=(a(23),function(t){return r.a.createElement("div",{className:"item"},r.a.createElement(p,{product_image:t.product_image,product_name:t.product_name}),r.a.createElement(d,{brand_name:t.brand_name,product_name:t.product_name,quantity:t.quantity}),r.a.createElement(g,t),r.a.createElement(f,{price:t.price,mrp:t.mrp}))}),y=(a(24),a(25),function(t){var e=t.isShowing,a=t.hide,n=t.summary;return e?s.a.createPortal(r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"modal-overlay"}),r.a.createElement("div",{className:"modal-wrapper","aria-modal":!0,"aria-hidden":!0,tabIndex:-1,role:"dialog"},r.a.createElement("div",{className:"modal"},r.a.createElement("div",{className:"modal-header"},r.a.createElement("button",{type:"button",className:"modal-close-button","data-dismiss":"modal","aria-label":"Close",onClick:a},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),r.a.createElement("div",{className:"total-cost"},"Total Cost: ",r.a.createElement("span",{className:"amt"},n)),r.a.createElement("div",{className:"transaction"},"Your transaction was successful !!!")))),document.body):null}),O=function(){var t=Object(n.useState)(!1),e=Object(m.a)(t,2),a=e[0],r=e[1];return{isShowing:a,toggle:function(){r(!a)}}},N=function(t){var e=O(),a=e.isShowing,c=e.toggle,s=Object(n.useState)({total_qty:0,total_cost:0}),o=Object(m.a)(s,2),l=o[0],i=o[1];return Object(n.useEffect)((function(){var t=localStorage.getItem("cart_item");t&&new Promise((function(e,a){var n=0,r=0;(t=JSON.parse(t)).length<=0&&a("No items in cart"),t.forEach((function(t,e){r+=t.mrp*t.cart_qty,n+=t.cart_qty})),e({total_cost:r,total_qty:n})})).then((function(t){i({total_cost:t.total_cost,total_qty:t.total_qty})}),(function(t){console.log(t,"Reject")}))}),[t]),r.a.createElement("div",{className:"items summary"},r.a.createElement("div",{className:"cart-total"},r.a.createElement("span",{className:"title-cart"},"Total Qty: ",r.a.createElement("span",null,l.total_qty)),r.a.createElement("span",{className:"title-cart"},"Total Cost: ",r.a.createElement("span",null,"Rs. ",l.total_cost))),r.a.createElement("div",{className:"cart-btn"},r.a.createElement("button",{className:"add-to-cart",onClick:c},"Checkout"),l.total_cost>"0"?r.a.createElement(y,{summary:l.total_cost,isShowing:a,hide:c}):null))},j=function(t){var e=Object(n.useState)([]),a=Object(m.a)(e,2),c=a[0],s=a[1],o=Object(n.useState)(!0),l=Object(m.a)(o,2),i=l[0],u=l[1],p=Object(n.useState)(!0),d=Object(m.a)(p,2),f=d[0],b=d[1],E=Object(n.useCallback)((function(){b(!f,[f])})),_=Object(n.useCallback)((function(){u(!i,[i])}));return Object(n.useEffect)((function(){fetch("/productList.json").then((function(t){return t.json()})).then((function(t){200===parseInt(t.status)?s(t.products):console.log("Could not fetch data")}),(function(t){console.log(t,"Error")}))}),[t]),r.a.createElement("div",null,c.length>0?c.map((function(t,e){return r.a.createElement(h,Object.assign({isCartUpdate:_,is_updated:f,setCartUpdate:E},t,{key:"product-".concat(e)}))})):"",r.a.createElement(N,{isCartUpdated:i}))},S=function(t){Object(i.a)(a,t);var e=Object(u.a)(a);function a(){var t;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(t=e.call.apply(e,[this].concat(r))).state={isClear:!1},t}return Object(l.a)(a,[{key:"render",value:function(){var t=this.state.isClear;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"shopping-cart"},r.a.createElement("div",{className:"title header-pan"},"Shopping Bag"),r.a.createElement(j,{isClear:t})))}}]),a}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(S,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}],[[11,1,2]]]);
//# sourceMappingURL=main.22baad46.chunk.js.map